(function(n){var e=function(e,o){var d=e.attr("id"),i=o.attr("data-label")||"menu",t=n('<select id="'+d+'select" class="inputbox dj-select" />').on("change",function(){n(this).val&&(window.location=n(this).val())}),s=n('<label class="hidden" aria-hidden="true" for="'+d+'select">'+i+"</label>"),c=e.find("li.dj-up");a(c,t,0),s.appendTo(o),t.appendTo(o),o.find(".dj-mobile-open-btn").on("click",function(n){n.stopPropagation(),n.preventDefault();var e=t[0];if(document.createEvent){var a=document.createEvent("MouseEvents");a.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(a)}else e.fireEvent&&e.fireEvent("onmousedown")})},a=function(e,o,d){for(var i="",t=!1,s=0;s<d;s++)i+="- ";e.each(function(){var e=n(this),s=e.find("> a").first(),c=e.find("> .dj-subwrap > .dj-subwrap-in > .dj-subcol > .dj-submenu > li, > .dj-subtree > li");if(s.length){var l="",f=s.find("img").first();f.length?l=i+f.attr("alt"):(l=s.html().replace(/(<small[^<]+<\/small>)/gi,""),l=i+l.replace(/(<([^>]+)>)/gi,""));var r=n('<option value="'+s.prop("href")+'">'+l+"</option>").appendTo(o);s.prop("href")||r.prop("disabled",!0),e.hasClass("active")&&(o.val(r.val()),t=!0)}c&&a(c,o,d+1)}),d||t||o.val("")},o=function(e){var a=null;e.find("ul.dj-mobile-nav > li, ul.dj-mobile-nav-child > li").each(function(){var o=n(this),d=o.find("> a").first();if(d.length){var i=o.find("> ul.dj-mobile-nav-child > li:not(:empty)");i.length||(o.removeClass("parent"),o.find("ul.dj-mobile-nav-child").remove()),o.hasClass("parent")&&(o.hasClass("active")?d.attr("aria-expanded",!0):d.attr("aria-expanded",!1),d.append('<span class="toggler"></span>'),d.on("click",function(e){o.hasClass("active")?n(e.target).hasClass("toggler")&&(e.preventDefault(),e.stopPropagation(),clearTimeout(a),o.removeClass("active"),d.attr("aria-expanded",!1)):e.preventDefault()})),d.on("focus",function(){a=setTimeout(function(){o.click()},250)})}o.on("click",function(){if(o.siblings().removeClass("active"),o.siblings().find("> a").attr("aria-expanded",!1),o.addClass("active"),d.length&&(d.attr("aria-expanded",!0),d.is('[href^="#"]'))){var a=e.find(".dj-offcanvas-close-btn");a.length&&(n(document.body).addClass("dj-offcanvas-no-effects"),a.click())}})})},d=function(e){var a=null,d=jQuery(".dj-offcanvas-wrapper").first(),i=jQuery(".dj-offcanvas-pusher").first(),t=jQuery(".dj-offcanvas-pusher-in").first();d.length||(a=n(document.body).children(),d=n('<div class="dj-offcanvas-wrapper" />'),i=n('<div class="dj-offcanvas-pusher" />'),t=n('<div class="dj-offcanvas-pusher-in" />'));var s=e.find(".dj-offcanvas").first(),c=s.data("effect");n(document.body).addClass("dj-offcanvas-effect-"+c);var l=null;e.find(".dj-mobile-open-btn").on("click",function(e){e.stopPropagation(),e.preventDefault(),clearTimeout(l),s.data("scroll",n(window).scrollTop()),n(document.body).addClass("dj-offcanvas-anim").removeClass("dj-offcanvas-no-effects"),setTimeout(function(){n(document.body).addClass("dj-offcanvas-open")},50),t.css("top",-s.data("scroll")),s.find(".dj-offcanvas-close-btn").focus()}),a&&n(document.body).prepend(d),3==c||6==c||7==c||8==c||14==c?i.append(s):d.append(s),a&&(d.append(i),i.append(t),t.append(a)),s.find(".dj-offcanvas-close-btn").on("click",function(a){a.stopPropagation(),a.preventDefault(),n(document.body).hasClass("dj-offcanvas-open")&&(n(document.body).removeClass("dj-offcanvas-open"),n(document.body).hasClass("dj-offcanvas-no-effects")?(t.css("top",0),n(document.body).removeClass("dj-offcanvas-anim"),l=setTimeout(function(){n(document.body).removeClass("dj-offcanvas-no-effects")},500)):l=setTimeout(function(){t.css("top",0),n(document.body).removeClass("dj-offcanvas-anim"),n(window).scrollTop(n(window).scrollTop()+s.data("scroll")),e.find(".dj-mobile-open-btn").focus()},500))}),n(".dj-offcanvas-pusher").on("click",function(e){n(e.target).hasClass("dj-offcanvas-pusher")&&s.find(".dj-offcanvas-close-btn").click()}),s.find(".dj-offcanvas-close-btn").on("keydown",function(n){9==n.which&&setTimeout(function(){s.find(":focus").length||s.find(".dj-offcanvas-close-btn").click()},50)}),s.find(".dj-offcanvas-end").on("focus",function(){s.find(".dj-offcanvas-close-btn").click()}),o(s)},i=function(e){var a=e.find(".dj-offcanvas").first();n(document.body).addClass("dj-offcanvas-effect-1");var d=null;e.find(".dj-mobile-open-btn").on("click",function(e){e.stopPropagation(),e.preventDefault(),clearTimeout(d),a.data("scroll",n(window).scrollTop()),n(document.body).addClass("dj-offcanvas-anim"),setTimeout(function(){n(document.body).addClass("dj-offcanvas-open")},50),a.find(".dj-offcanvas-close-btn").focus()}),a.find(".dj-offcanvas-close-btn").on("click",function(a){a.stopPropagation(),a.preventDefault(),n(document.body).hasClass("dj-offcanvas-open")&&(n(document.body).removeClass("dj-offcanvas-open"),d=setTimeout(function(){n(document.body).removeClass("dj-offcanvas-anim"),e.find(".dj-mobile-open-btn").focus()},500))}),a.find(".dj-offcanvas-close-btn").on("keydown",function(n){9==n.which&&setTimeout(function(){a.find(":focus").length||a.find(".dj-offcanvas-close-btn").click()},50)}),a.find(".dj-offcanvas-end").on("focus",function(){a.find(".dj-offcanvas-close-btn").click()}),o(a)},t=function(e){e.find(".dj-mobile-open-btn").on("click",function(n){n.stopPropagation(),n.preventDefault(),e.find(".dj-accordion-in").slideToggle("fast")}),n(document).on("click",function(a){n(a.target).closest(".dj-accordion-in").length||e.find(".dj-accordion-in").is(":visible")&&e.find(".dj-accordion-in").slideUp("fast")}),o(e)},s=[],c=null,l=function(){window.clearTimeout(c),c=window.setTimeout(function(){for(var e=0;e<s.length;e++)s[e].mobile&&(window.matchMedia("(max-width: "+s[e].trigger+"px)").matches?(n(document.body).addClass("dj-megamenu-mobile"),n(document.body).addClass(s[e].id+"-mobile"),n.contains(document,s[e].menu[0])&&(s[e].menu.after(s[e].menuHandler),s[e].menu.detach()),n.contains(document,s[e].mobileHandler[0])&&s[e].mobileHandler.replaceWith(s[e].mobile),n.contains(document,s[e].offcanvasHandler[0])&&s[e].offcanvasHandler.replaceWith(s[e].offcanvas)):(n(document.body).removeClass("dj-megamenu-mobile"),n(document.body).removeClass(s[e].id+"-mobile"),n.contains(document,s[e].mobile[0])&&(s[e].mobile.after(s[e].mobileHandler),s[e].mobile.detach()),s[e].offcanvas&&n.contains(document,s[e].offcanvas[0])&&(s[e].offcanvas.after(s[e].offcanvasHandler),s[e].offcanvas.detach()),n.contains(document,s[e].menuHandler[0])&&s[e].menuHandler.replaceWith(s[e].menu)))},100)};n(document).ready(function(){n(".dj-megamenu:not(.dj-megamenu-sticky)").each(function(){var e=n(this),a=n("#"+e.prop("id")+"mobile"),o=n("#"+e.prop("id")+"offcanvas"),c=s.length;s[c]={},s[c].id=e.prop("id"),s[c].trigger=e.data("trigger"),s[c].menu=e,s[c].menuHandler=n("<div />"),s[c].mobile=a.length?a:null,s[c].mobileHandler=n("<div />"),s[c].offcanvas=o.length?o:null,s[c].offcanvasHandler=n("<div />");var l=n("#"+e.prop("id")+"mobileWrap");if(l.length&&l.empty().append(s[c].mobile),s[c].mobile){if(s[c].mobile.find(".dj-hideitem").remove(),s[c].mobile.hasClass("dj-megamenu-offcanvas")){var f=!!a.parents("[data-joomla4]").length;f?i(s[c].mobile):d(s[c].mobile)}else s[c].mobile.hasClass("dj-megamenu-accordion")&&t(s[c].mobile);s[c].mobile.parents(".nav-collapse").addClass("collapse in").css("height","auto").prev(".navbar").remove(),s[c].mobile.parents(".navbar-collapse").addClass("show").prev(".navbar-toggler").remove()}}),n(window).resize(l),l()}),n(window).one("load",function(){for(var a=0;a<s.length;a++)s[a].mobile&&s[a].mobile.hasClass("dj-megamenu-select")&&e(s[a].menu,s[a].mobile);n(".dj-offcanvas-close-btn").click()})})(jQuery);